
**Требуется реализовать сервис, предоставляющий пользователям информацию о
калорийности различных продуктов питания.**

У сервиса есть БД, в которой про каждый продукт указано:
1. Название
2. Производитель
3. Калорийность на 100г
4. Белков на 100г
5. Жиров на 100г
6. Углеводов на 100г

**Пользователи могут выполнять несколько операций:**
1. Искать продукты по названию. Пользователь вводит строку и сервис нечетким
поиском подбирает и показывает ему список продуктов, подходящих под его запрос.
Про каждый продукт отображается имя и производитель.
2. Получать подробную информацию по конкретному продукту (все поля)
3. Добавлять новые продукты. Процесс добавления нового продукта устроен так:
    a. Пользователь отправляет сервису всю информацию о продукте
    b. Информация сохраняется в сервисе, но недоступна другим пользователям.
    c. Информацию просматривает администратор и если все корректно, помечает
данные как корректные и информация о продукте становится доступна всем
пользователям.
4. Изменять информацию о продукте. Процесс аналогичен добавлению:
    a. Пользователь присылает сервису новые данные о продукте
    b. Данные сохраняются в БД, но недоступны остальным.
    c. Администратор в ручном режиме проверяет данные и делает их доступными
всем пользователям.

**ЗАДАЧА**
Реализовать бекенд для описанного выше сервиса. Бекенд предоставляет REST API для
выполнения всех операций (кроме пометки корректности продуктов – это действие админ
делает руками в БД)

**При реализации используем:**
1. Java 8
2. Spring Boot.
3. REST API реализуем через Spring MVC
4. Данные хранятся в реляционной БД.
5. Доступ к БД через Hibernate
6. Сборка проекта через Maven.


**Реализация**
В качестве БД выбран Postgress 12ой (последняя стабильная).
Предусловия - надо создать позователя и БД

CREATE ROLE test WITH PASSWORD 'test';
ALTER ROLE test WITH LOGIN;
CREATE DATABASE test OWNER test;

Реализация сделана через 2 сущности: Product и ProductUpdateOrder
Product - это сущность продукта
ProductUpdateOrder - это сущность запроса на изменение.

**Запуск приложения** 
mvn clean spring-boot:run

**Примеры запросов пользователей**

Все продукты опубликованные администратором:<br>
curl --location --request GET 'localhost:8080/products'

Продукт с конкретным идентификатором:<br>
curl --location --request GET 'localhost:8080/products/{id}'

Поиск по имени (нечеткий):<br>
curl --location --request GET 'localhost:8080/products?name=[значение]'

Внесение нового продукта:<br>
curl --location --request POST 'localhost:8080/products' \
--header 'Content-Type: application/json' \
--data-raw '{"name": "Coca-Cola","manufacturer": "Coca","calories": 500.0,"proteins": 23.0,"fats": 1.0,"carbohydrates": 444.0}'



Внесение запроса на изменения по идентификатору продукта:<br>
curl --location --request PUT 'localhost:8080/products/{id}' \
--header 'Content-type: application/json' \
--data-raw '{"name": "Coca-Cola 3","manufacturer": "Coca 5","calories": 500.0,"proteins": 23.0,"fats": 1.0,"carbohydrates": 444.0}'

**Примеры запросов для администратора**

Просмотр всех присланных запросов на изменение<br>
curl --location --request GET 'localhost:8080/admin/productUpdateOrders'

Просмотр присланного запроса на изменение по идентификатору продукта:<br>
curl --location --request GET 'localhost:8080/admin/productUpdateOrders?productId=[значение]'

Просмотр присланного запроса на изменение по идентификатору:<br>
curl --location --request GET 'localhost:8080/admin/productUpdateOrders/{id}'

Принятие решения о правильности присланных изменений по идентификатору изменений:<br>
curl --location --request POST 'localhost:8080/admin/productUpdates/{id}/ACCEPT'

Принятие решения об отклонении присланных изменений:<br>
curl --location --request POST 'localhost:8080/admin/productUpdates/{id}/DENY'

Принятие решения о публикации продукта:<br>
curl --location --request POST 'localhost:8080/admin/products/{id}/PUBLISH'

Принятие решения об сокрытии продукта:<br>
curl --location --request POST 'localhost:8080/admin/products/{id}/HIDE'

**Постраничный вывод**
Все запросы возвращающие коллекции возвращают данные по-странично. 
По-умоланию возвращается первая страница.
Для задания параметров страницы используются параметры запроса:<br>
page - номер запрашиваемой страницы<br>
size - кол-во элементов на странице (по-умолчанию равно 5)<br>
sortDir - направление сортировки элементов, может принимать значения ASC|DESC (по-умолчанию равно ASC)<br>
sort - поле элемента, по которому ведется сортировка, может принимать значения name|manufacturer (по-умолчанию равно name)